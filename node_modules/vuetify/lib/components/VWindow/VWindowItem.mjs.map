{"version":3,"file":"VWindowItem.mjs","names":["Touch","makeComponentProps","makeGroupItemProps","useGroupItem","makeLazyProps","useLazy","MaybeTransition","useSsrBoot","computed","inject","nextTick","ref","convertToUnit","genericComponent","propsFactory","useRender","VWindowGroupSymbol","VWindowSymbol","makeVWindowItemProps","reverseTransition","type","Boolean","String","default","undefined","transition","VWindowItem","name","directives","props","emits","val","setup","_ref","slots","window","groupItem","isBooted","Error","isTransitioning","hasTransition","isReversed","value","onAfterTransition","transitionCount","transitionHeight","onBeforeTransition","rootRef","clientHeight","onTransitionCancelled","onEnterTransition","el","onBeforeEnter","onAfterEnter","onEnterCancelled","onBeforeLeave","onAfterLeave","onLeaveCancelled","onEnter","hasContent","isSelected","_createVNode","_withDirectives","selectedClass","class","style","_vShow"],"sources":["../../../src/components/VWindow/VWindowItem.tsx"],"sourcesContent":["// Directives\nimport Touch from '@/directives/touch'\n\n// Composables\nimport { makeComponentProps } from '@/composables/component'\nimport { makeGroupItemProps, useGroupItem } from '@/composables/group'\nimport { makeLazyProps, useLazy } from '@/composables/lazy'\nimport { MaybeTransition } from '@/composables/transition'\nimport { useSsrBoot } from '@/composables/ssrBoot'\n\n// Utilities\nimport { computed, inject, nextTick, ref } from 'vue'\nimport { convertToUnit, genericComponent, propsFactory, useRender } from '@/util'\n\n// Types\nimport { VWindowGroupSymbol, VWindowSymbol } from './VWindow'\n\nexport const makeVWindowItemProps = propsFactory({\n  reverseTransition: {\n    type: [Boolean, String],\n    default: undefined,\n  },\n  transition: {\n    type: [Boolean, String],\n    default: undefined,\n  },\n\n  ...makeComponentProps(),\n  ...makeGroupItemProps(),\n  ...makeLazyProps(),\n}, 'v-window-item')\n\nexport const VWindowItem = genericComponent()({\n  name: 'VWindowItem',\n\n  directives: {\n    Touch,\n  },\n\n  props: makeVWindowItemProps(),\n\n  emits: {\n    'group:selected': (val: { value: boolean }) => true,\n  },\n\n  setup (props, { slots }) {\n    const window = inject(VWindowSymbol)\n    const groupItem = useGroupItem(props, VWindowGroupSymbol)\n    const { isBooted } = useSsrBoot()\n\n    if (!window || !groupItem) throw new Error('[Vuetify] VWindowItem must be used inside VWindow')\n\n    const isTransitioning = ref(false)\n    const hasTransition = computed(() => window.isReversed.value ? props.reverseTransition !== false : props.transition !== false)\n\n    function onAfterTransition () {\n      if (!isTransitioning.value || !window) {\n        return\n      }\n\n      // Finalize transition state.\n      isTransitioning.value = false\n      if (window.transitionCount.value > 0) {\n        window.transitionCount.value -= 1\n\n        // Remove container height if we are out of transition.\n        if (window.transitionCount.value === 0) {\n          window.transitionHeight.value = undefined\n        }\n      }\n    }\n\n    function onBeforeTransition () {\n      if (isTransitioning.value || !window) {\n        return\n      }\n\n      // Initialize transition state here.\n      isTransitioning.value = true\n\n      if (window.transitionCount.value === 0) {\n        // Set initial height for height transition.\n        window.transitionHeight.value = convertToUnit(window.rootRef.value?.clientHeight)\n      }\n\n      window.transitionCount.value += 1\n    }\n\n    function onTransitionCancelled () {\n      onAfterTransition() // This should have the same path as normal transition end.\n    }\n\n    function onEnterTransition (el: Element) {\n      if (!isTransitioning.value) {\n        return\n      }\n\n      nextTick(() => {\n        // Do not set height if no transition or cancelled.\n        if (!hasTransition.value || !isTransitioning.value || !window) {\n          return\n        }\n\n        // Set transition target height.\n        window.transitionHeight.value = convertToUnit(el.clientHeight)\n      })\n    }\n\n    const transition = computed(() => {\n      const name = window.isReversed.value\n        ? props.reverseTransition\n        : props.transition\n\n      return !hasTransition.value ? false : {\n        name: typeof name !== 'string' ? window.transition.value : name,\n        onBeforeEnter: onBeforeTransition,\n        onAfterEnter: onAfterTransition,\n        onEnterCancelled: onTransitionCancelled,\n        onBeforeLeave: onBeforeTransition,\n        onAfterLeave: onAfterTransition,\n        onLeaveCancelled: onTransitionCancelled,\n        onEnter: onEnterTransition,\n      }\n    })\n\n    const { hasContent } = useLazy(props, groupItem.isSelected)\n\n    useRender(() => (\n      <MaybeTransition transition={ transition.value } disabled={ !isBooted.value }>\n        <div\n          class={[\n            'v-window-item',\n            groupItem.selectedClass.value,\n            props.class,\n          ]}\n          style={ props.style }\n          v-show={ groupItem.isSelected.value }\n        >\n          { hasContent.value && slots.default?.() }\n        </div>\n      </MaybeTransition>\n    ))\n\n    return {}\n  },\n})\n\nexport type VWindowItem = InstanceType<typeof VWindowItem>\n"],"mappings":"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"}